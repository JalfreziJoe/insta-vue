var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,s=Object.getOwnPropertySymbols,o=Object.prototype.propertyIsEnumerable,n=(t,s,o)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o,a=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&n(e,l,a[l]);if(s)for(var l of s(a))o.call(a,l)&&n(e,l,a[l]);return e};import{r as l,o as r,c as u,f as i,a as d,b as c,d as m,e as p,t as I,g,w as h,h as f,v as y,i as w,u as k,j as C,k as v,F as b,l as A,m as x,I as E,n as j,C as S,p as H,q as L,s as U,x as P,y as F,z as M,A as J,B as N}from"./vendor.80912ed6.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(s){const o=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((s,a)=>{const l=new URL(e,o);if(self[t].moduleMap[l])return s(self[t].moduleMap[l]);const r=new Blob([`import * as m from '${l}';`,`${t}.moduleMap['${l}']=m;`],{type:"text/javascript"}),u=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){a(new Error(`Failed to import: ${e}`)),n(u)},onload(){s(self[t].moduleMap[l]),n(u)}});document.head.appendChild(u)})),self[t].moduleMap={}}}("/assets/");const T={setup(){document.title="Insta-Vue Jalfrezi"}};T.render=function(e,t,s,o,n,a){const i=l("router-view");return r(),u(i)};i.initializeApp({apiKey:"AIzaSyBEvi45B2BWD-y0X4FKE3lwd4AYS5mTlsA",authDomain:"insta-vue-efc94.firebaseapp.com",databaseURL:"https://insta-vue-efc94-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"insta-vue-efc94",storageBucket:"insta-vue-efc94.appspot.com",messagingSenderId:"746540389387",appId:"1:746540389387:web:3324af7b53c1b0e3d5630e"});const V=i.firestore(),D=i.auth(),Q=i.firestore,z=V.collection("users"),q=V.collection("photos");const G=d({modules:{auth:{state:()=>({userId:null}),actions:{async auth(e,t){try{let s;s="login"===t.mode?await D.signInWithEmailAndPassword(t.email,t.password):await D.createUserWithEmailAndPassword(t.email,t.password),e.commit("setUser",{userId:s.user.uid})}catch(s){switch(s.code){case"auth/email-already-in-use":throw new Error("Email already taken.");case"auth/invalid-email":throw new Error("Invalid email, please try again");case"auth/user-disabled":throw new Error("User disabled");case"auth/user-not-found":throw new Error("Please signup first");case"auth/wrong-password":throw new Error("Could not authenticate. Please try again")}}},storeLogin(e,t){e.commit("setUser",{userId:t.userId})},clearAuth(e){D.signOut(),e.commit("setUser",{userId:null})},autoLogout(e){e.dispatch("clearAuth")}},getters:{userId:e=>e.userId,isAuthenticated:e=>!!e.userId},mutations:{setUser(e,t){e.userId=t.userId}}},users:{namespaced:!0,state:()=>({user:{userId:"",username:"",fullname:"",emailAddress:"",following:[],followers:[],dateCreated:Date.now()},userLoaded:!1}),getters:{username:e=>e.user.username,following:e=>e.user.following,fullname:e=>e.user.fullname,isUserLoaded:e=>e.userLoaded},actions:{async loadUser(e,t){e.commit("setUser",t.uid,null,{root:!0});try{const s=await z.doc(t.uid).get();if(!s.exists)throw new Error("Error getting user");e.commit("setUser",s.data()),e.commit("setUserLoaded")}catch(s){throw new Error(s.message)}},async saveUser(e,{username:t,fullname:s,emailAddress:o}){const n=e.rootGetters.userId,l={username:t,fullname:s,emailAddress:o,userId:n,following:[],followers:[],dateCreated:Date.now()};try{const e=z.doc(n).set(a({},l));console.dir(e.data)}catch(r){throw new Error(r.message)}}},mutations:{setUser(e,t){e.user=t},setUserLoaded(e){e.userLoaded=!0}}},photos:{state:()=>({photos:[{photoId:"",userId:"",imageSrc:"",caption:"",likes:[],comments:[{displayName:"",comment:""}],userLatitude:"",userLongitude:"",dateCreated:Date.now()}]}),getters:{},actions:{},mutations:{}}}});var R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAA6CAMAAADPwpb5AAAC/VBMVEUAAAAjHyAjHyD///8jICAkHyQjHyAnISFAIEAjICAkJCQkICEjHyAoIiIjHyArKyskJCQlISFVVVUjICGAgIAnISEkHyEkICElHyUkHyAuLi4jICMjICEuIyMjICEpIyNAQEAoIiIjICIlICUmISEkICEjICMkISEpKSkkICAjICElHyEzMzMlIiIkICQjICEkHyEkICEkICEkICAmIiI5OTkmJiYlICIjHyAnJycmISEoKCgjHyEkICEkJCQlHyIjICIkICAkHyEjIyMjICEkICAkHyElICAkICAkHyEkHyEkISEkHyEkJCQjICEkHyAlHyIkICEkHyAnJyckICEjHyEsISEpIiIkICEjICAkISEkICAjHyMrICskICAkISEkHyAjIyMjIyMrKyskHyAkICEkISEjICEmIiIkICQmJiYrKyskHyEjIyMjHyEkICEzMzMkHyAoICgzIiItLS0jICAkISEnIyMkHyEpISEkICAmIiIjICAkHyIkIiIkICInIyMkICAkICAjICEkHyAmJiYmICYkICEkICAkHyAkICIlICAkICAkHyIjHyEjHyAkHyAlISEkICIjICEkICAmIiIkHyEkICAkICAlIiIjICAkICEjHyElIiIkICAkHyAkISEjHyEkISEkICEkJCQkJCQkISEkISEnJycjICIlICIkHyAjISEkICEkICAkICIkICEjICAkHyEkJCQjICEkHyIkHyElISEjICAjICAjHyAlICAkHyAlISErIiIkICAkHyElICIjICEjICAlHyEkHyElISEjHyEkICElICMlISEmHyMjISEkHyEkICEkICAnIiIjHyEjICEmISEjHyEjISElICAjICEkICAjICAjICEkISEjHyEmICMjISElICAmHyIkJCQmICAkICAkHyEkICIkICEkHyQjISEkICIjISEjHyEmHyMkICAkICIjICAjICAkICAwIDAkICEkICEjHyEkISEkISEjHyEkICEkICIkICAkHyEkISEjHyBS+u4fAAAA/nRSTlMA/v0B9zH8LgjvMvn2JvUGHD4D8AIn+/Ep7AtQmRbgLAQtmDA9+EhrGb7YkgVLQNHjsOqHQwkUYeYhLxPM4ipSkLd6JOmWrG9PlPNk2yPo3lqx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";const B={setup(){const e=k(),t=c(""),s=c(""),o=c(null),n=C(),a=m((()=>""===t.value||""===s.value));return{email:t,password:s,error:o,isInvalid:a,onSubmit:async()=>{if(o.value=null,t.value.includes("@"))try{await e.dispatch("auth",{mode:"login",email:t.value,password:s.value});await e.dispatch("users/loadUser",{uid:e.getters.userId}),n.replace("/")}catch(a){o.value=a.message}else o.value="Please enter a valid email address"}}}},K={class:"container flex mx-auto max-w-screen-md items-center h-screen"},W=p("div",{class:"flex w-3/5"},[p("img",{src:"/assets/iphone-with-profile.9076047e.jpg",alt:"iPhone with Instagram app"})],-1),Y={class:"flex flex-col w-2/5"},O={class:"flex flex-col items-center bg-white p-4 border mb-4"},X=p("h1",{class:"flex justify-center w-full"},[p("img",{src:R,alt:"Instagram",class:"mt-2 w-6/12 mb-4"})],-1),Z={key:0,className:"mb-4 text-xs text-red-500"},_={class:"flex justify-center items-center flex-col w-full bg-white p-4 border"},$={class:"text-sm"},ee=v(" Don't have an account? "),te=v(" Sign up ");B.render=function(e,t,s,o,n,a){const i=l("router-link");return r(),u("div",K,[W,p("div",Y,[p("div",O,[X,o.error?(r(),u("p",Z,I(o.error),1)):g("",!0),p("form",{onSubmit:t[3]||(t[3]=h(((...e)=>o.onSubmit&&o.onSubmit(...e)),["prevent"]))},[f(p("input",{"aria-label":"Enter your email address",class:"text-sm w-full mr-3 py-5 px-4 h-2 border rounded mb-2",type:"text",placeholder:"Email address","onUpdate:modelValue":t[1]||(t[1]=e=>o.email=e)},null,512),[[y,o.email,void 0,{trim:!0}]]),f(p("input",{"aria-label":"Enter your password",class:"text-sm w-full mr-3 py-5 px-4 h-2 border rounded mb-2",type:"password",placeholder:"Password","onUpdate:modelValue":t[2]||(t[2]=e=>o.password=e)},null,512),[[y,o.password,void 0,{trim:!0}]]),p("button",{disabled:o.isInvalid,type:"submit",class:["bg-blue-500 text-white w-full rounded h-8 font-bold",{"cursor-not-allowed opacity-50":o.isInvalid}]}," Log In ",10,["disabled"])],32)]),p("div",_,[p("p",$,[ee,p(i,{to:"/signup",class:"font-bold"},{default:w((()=>[te])),_:1})])])])])};const se={setup(){const e=c(""),t=c(""),s=c(""),o=c(""),n=c(null),a=c(null),l=k(),r=C(),u=m((()=>""===e.value||""===t.value||""===s.value||""===o.value));return{username:e,fullname:t,email:s,password:o,isInvalid:u,onSubmit:async()=>{if(n.value=null,s.value.includes("@"))try{await l.dispatch("auth",{mode:"signup",email:s.value,password:o.value}),await l.dispatch("users/saveUser",{username:e.value,fullname:t.value,emailAddress:s.value}),r.replace("/")}catch(a){n.value=a.message}else n.value="Please enter a valid email address."},error:n,checkUsernameAvailability:async()=>{try{const t=await z.where("username","==",e.value).get();0!==t.docs.map((e=>e.data().length>0)).length&&(a.value="Username already taken, please pick another.")}catch(t){}},usernameFocus:()=>{a.value=null},usernameIsAvailable:a}}},oe={class:"container flex mx-auto max-w-xs items-center h-screen"},ne={class:"flex flex-col"},ae={class:"flex flex-col items-center bg-white p-4 border mb-4"},le=p("h1",{class:"flex justify-center w-full"},[p("img",{src:R,alt:"Instagram",class:"mt-2 w-6/12 mb-4"})],-1),re={key:0,class:"mb-4 text-xs text-red-500 text-center"},ue={key:1,class:"mb-4 text-xs text-red-500 text-center"},ie={class:"flex justify-center items-center flex-col w-full bg-white p-4 border"},de={class:"text-sm"},ce=v(" Have an account? "),me=v(" Login ");se.render=function(e,t,s,o,n,a){const i=l("router-link");return r(),u("div",oe,[p("div",ne,[p("div",ae,[le,o.error?(r(),u("p",re,I(o.error),1)):g("",!0),o.usernameIsAvailable?(r(),u("p",ue,I(o.usernameIsAvailable),1)):g("",!0),p("form",{onSubmit:t[7]||(t[7]=h(((...e)=>o.onSubmit&&o.onSubmit(...e)),["prevent"]))},[f(p("input",{"aria-label":"Enter your username",class:["text-sm text-gray w-full mr-3 py-5 px-4 h-2 border bg-gray-background rounded mb-2",{"border-red-600":!!o.usernameIsAvailable}],type:"text",placeholder:"Username","onUpdate:modelValue":t[1]||(t[1]=e=>o.username=e),onBlur:t[2]||(t[2]=(...e)=>o.checkUsernameAvailability&&o.checkUsernameAvailability(...e)),onFocus:t[3]||(t[3]=(...e)=>o.usernameFocus&&o.usernameFocus(...e))},null,34),[[y,o.username]]),f(p("input",{"aria-label":"Enter your full name",class:"text-sm text-gray w-full mr-3 py-5 px-4 h-2 border bg-gray-background rounded mb-2",type:"text",placeholder:"Full name","onUpdate:modelValue":t[4]||(t[4]=e=>o.fullname=e)},null,512),[[y,o.fullname]]),f(p("input",{"aria-label":"Enter your email address",class:"text-sm text-gray w-full mr-3 py-5 px-4 h-2 border bg-gray-background rounded mb-2",type:"text",placeholder:"Email address","onUpdate:modelValue":t[5]||(t[5]=e=>o.email=e)},null,512),[[y,o.email]]),f(p("input",{"aria-label":"Enter your password",class:"text-sm text-gray w-full mr-3 py-5 px-4 h-2 border bg-gray-background rounded mb-2",type:"password",placeholder:"Password","onUpdate:modelValue":t[6]||(t[6]=e=>o.password=e)},null,512),[[y,o.password]]),p("button",{disabled:o.isInvalid,type:"submit",class:["bg-blue-500 text-white w-full rounded h-8 font-bold",{"cursor-not-allowed opacity-50":o.isInvalid}]}," Sign Up ",10,["disabled"])],32)]),p("div",ie,[p("p",de,[ce,p(i,{to:"/login",class:"font-bold text-blue"},{default:w((()=>[me])),_:1})])])])])};const pe={setup(){const e=k(),t=C();function s(){e.dispatch("clearAuth"),t.replace("/login")}const o=m((()=>k().getters.isAuthenticated)),n=m((()=>k().getters["users/isUserLoaded"]));return{logout:s,isLoggedIn:o,username:m((()=>k().getters["users/username"])),logout:s,userLoaded:n}}},Ie={class:"h-16 bg-white border-b mb-8"},ge={class:"container mx-auto max-width-lg h-full"},he={class:"flex justify-between h-full"},fe={class:"text-gray-700 text-center flex items-center align-items cursor-pointer"},ye=p("img",{src:R,alt:"Instagram",class:"mt-2 w-6/12"},null,-1),we={class:"text-gray text-center flex items-center align-items"},ke={key:0,class:"text-gray text-center flex items-center align-items"},Ce=p("svg",{class:"w-8 mr-6 text-black-light cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[p("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),ve=p("svg",{class:"w-8 mr-6 text-black-light cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[p("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),be={key:0,class:"flex items-center cursor-pointer"},Ae={key:1},xe=p("button",{type:"button",class:"bg-blue-500 font-bold text-sm rounded text-white w-20 h-8"}," Log In ",-1),Ee=p("button",{type:"button",class:"font-bold text-sm rounded text-blue w-20 h-8"}," Sign Up ",-1);async function je(e){const t=await z.where("userId","==",e).get();return a(a({},t.docs[0].data()),{docId:t.docs[0].id})}async function Se(e,t,s,o){let n={};n=o?{following:s?Q.FieldValue.arrayRemove(t):Q.FieldValue.arrayUnion(t)}:{followers:s?Q.FieldValue.arrayRemove(t):Q.FieldValue.arrayUnion(t)},z.doc(e).update(n)}async function He(e="",t=[]){let s={};return t.length>0&&(s=await async function(e,t){const s=(await q.where("userId","in",t).get()).docs.map((e=>a(a({},e.data()),{docId:e.id}))),o=await Promise.all(s.map((async t=>{let s=!1;t.likes.includes(e)&&(s=!0);const o=(await je(t.userId)).username;return a(a({username:o},t),{userLikedPhoto:s})})));return o.sort(((e,t)=>{t.dateCreated,e.dateCreated})),o}(e,t)),s}pe.render=function(e,t,s,o,n,a){const i=l("router-link");return r(),u("header",Ie,[p("div",ge,[p("div",he,[p("div",fe,[p("h1",null,[p(i,{to:"/","aria-label":"Dashboard"},{default:w((()=>[ye])),_:1})])]),p("div",we,[o.isLoggedIn?(r(),u("div",ke,[p(i,{to:"/","arial-label":"Home"},{default:w((()=>[Ce])),_:1}),p("button",{type:"button",title:"Sign Out",onClick:t[1]||(t[1]=(...e)=>o.logout&&o.logout(...e))},[ve]),o.userLoaded?(r(),u("div",be,[p(i,{to:"/p/"+o.username},{default:w((()=>[p("img",{class:"rounded-full h-8 w-8 flex",src:"/assets/images/avatars/"+o.username+".jpg",alt:o.username+" profile picture"},null,8,["src","alt"])])),_:1},8,["to"])])):g("",!0)])):(r(),u("div",Ae,[p(i,{to:"/login"},{default:w((()=>[xe])),_:1}),p(i,{to:"/signup"},{default:w((()=>[Ee])),_:1})]))])])])])};const Le={props:["username"]},Ue={class:"flex border-b h-4 p-4 py-8"},Pe={class:"flex items-center"},Fe={class:"font-bold"};Le.render=function(e,t,s,o,n,a){const i=l("router-link");return r(),u("div",Ue,[p("div",Pe,[p(i,{to:"/p/"+s.username,class:"flex items-center"},{default:w((()=>[p("img",{class:"rounded-full h-8 w-8 flex mr-3",src:"/assets/images/avatars/"+s.username+".jpg",alt:s.username+" profile picture"},null,8,["src","alt"]),p("p",Fe,I(s.username),1)])),_:1},8,["to"])])])};const Me={props:["src","caption"]},Je={class:"post__img"};Me.render=function(e,t,s,o,n,a){return r(),u("div",Je,[p("img",{src:s.src,alt:s.caption},null,8,["src","alt"])])};const Ne={props:["docId","totalLikes","likedPhoto","commentRef"],emits:["startComment"],setup({docId:e,totalLikes:t,likedPhoto:s},o){const n=c(s),a=c(t),l=k().getters.userId,r=m((()=>a.value+(a.value>1?" likes":" like"))),u=()=>{o.emit("startComment")};return{toggleLike:async()=>{n.value=!n.value,await q.doc(e).update({likes:n.value?Q.FieldValue.arrayUnion(l):Q.FieldValue.arrayRemove(l)}),a.value=n.value?a.value+1:a.value-1},toggleLikedPhoto:n,totalLikesText:r,theTotalLikes:a,startAComment:u,keyDownComment:e=>{"Enter"===e.key&&u()}}}},Te={class:"flex justify-between p-4"},Ve={class:"flex"},De=p("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1),Qe=p("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"{2}",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},null,-1),ze={key:0,class:"p-4 py-0"},qe={class:"font-bold"};Ne.render=function(e,t,s,o,n,a){return r(),u(b,null,[p("div",Te,[p("div",Ve,[(r(),u("svg",{onClick:t[1]||(t[1]=(...e)=>o.toggleLike&&o.toggleLike(...e)),class:["w-8 mr-4 select-none cursor-pointer",{"fill-current text-red-500":o.toggleLikedPhoto}],xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[De],2)),(r(),u("svg",{onClick:t[2]||(t[2]=(...e)=>o.startAComment&&o.startAComment(...e)),onKeydown:t[3]||(t[3]=(...e)=>o.keyDownComment&&o.keyDownComment(...e)),class:"w-8 text-black-light select-none cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[Qe],32))])]),o.theTotalLikes?(r(),u("div",ze,[p("p",qe,I(o.totalLikesText),1)])):g("",!0)],64)};const Ge={emits:["addNewComment"],setup(e,t){const s=c(""),o=c(null);return{comment:s,onSubmit:e=>{s.value.length<3||(t.emit("addNewComment",s.value),s.value="")},inputComment:o}}},Re={class:"border-t border-gray"};Ge.render=function(e,t,s,o,n,a){return r(),u("div",Re,[p("form",{class:"flex w-full justify-between pl-0 pr-5",onSubmit:t[2]||(t[2]=h(((...e)=>o.onSubmit&&o.onSubmit(...e)),["prevent"])),method:"POST"},[f(p("input",{"aria-label":"Add a comment",autoComplete:"off",class:"text-sm text-gray w-full mr-3 py-5 px-4",type:"text",name:"add-comment",placeholder:"Add a comment...","onUpdate:modelValue":t[1]||(t[1]=e=>o.comment=e),ref:"inputComment"},null,512),[[y,o.comment]]),p("button",{class:["text-sm font-bold text-blue-500",{"opacity-25":!o.comment}],type:"submit",disabled:o.comment.length<3}," Post ",10,["disabled"])],32)])};const Be={components:{AddComment:Ge},props:["docId","comments","posted"],setup({docId:e,comments:t,posted:s}){const o=k(),n=c(t),a=c(null);return{top3Comments:m((()=>n.value.slice(0,3))),daysAgo:m((()=>A(s,new Date))),comments:t,posted:s,addANewComment:t=>{const s=o.getters["users/username"];return n.value=[{username:s,comment:t},...n.value],q.doc(e).update({comments:Q.FieldValue.arrayUnion({username:s,comment:t})})},updatedableComments:n,inputComment:a}}},Ke={class:"p-4 pt-1 pb-4"},We={key:0,class:"text-sm text-gray-500 mb-1 cursor-pointer"},Ye={class:"mr-1 font-bold"},Oe={class:"text-gray uppercase text-xs mt-2"};Be.render=function(e,t,s,o,n,a){const i=l("router-link"),d=l("add-comment");return r(),u(b,null,[p("div",Ke,[o.updatedableComments.length>3?(r(),u("p",We," View all "+I(o.updatedableComments.length)+" comments ",1)):g("",!0),(r(!0),u(b,null,x(o.top3Comments,(e=>(r(),u("p",{key:e.comment+"-"+e.username,class:"mb-1"},[p(i,{to:"/p/"+e.username},{default:w((()=>[p("span",Ye,I(e.username),1)])),_:2},1032,["to"]),p("span",null,I(e.comment),1)])))),128)),p("p",Oe,I(o.daysAgo)+" ago",1)]),p(d,{onAddNewComment:o.addANewComment,ref:"inputComment"},null,8,["onAddNewComment"])],64)};const Xe={props:["username","caption"]},Ze={class:"p-4 pt-2 pb-0"},_e={class:"mr-1 font-bold"};Xe.render=function(e,t,s,o,n,a){return r(),u("div",Ze,[p("span",_e,I(s.username),1),p("span",null,I(s.caption),1)])};const $e={components:{TheHeader:Le,TheImage:Me,TheActions:Ne,TheFooter:Xe,TheComments:Be},props:["content"],methods:{commentFocus(){this.$refs.inputComment.inputComment.inputComment.focus()}}},et={class:"rounded col-span-4 border bg-white mb-16"};$e.render=function(e,t,s,o,n,a){const i=l("the-header"),d=l("the-image"),c=l("the-actions"),m=l("the-footer"),I=l("the-comments");return r(),u("div",et,[p(i,{username:s.content.username},null,8,["username"]),p(d,{src:s.content.imageSrc,caption:s.content.caption},null,8,["src","caption"]),p(c,{docId:s.content.docId,likedPhoto:s.content.userLikedPhoto,totalLikes:s.content.likes.length,onStartComment:a.commentFocus},null,8,["docId","likedPhoto","totalLikes","onStartComment"]),p(m,{username:s.content.username,caption:s.content.caption},null,8,["username","caption"]),p(I,{docId:s.content.docId,comments:s.content.comments,posted:s.content.dateCreated,ref:"inputComment"},null,8,["docId","comments","posted"])])};const tt={components:{ThePost:$e,InstagramLoader:E},setup(){const e=k(),t=c(!0);let s=c(null);const o=m((()=>e.getters["users/isUserLoaded"]));j(o,(()=>{n()}));const n=async()=>{o&&(s.value=await He(e.getters.userId,e.getters["users/following"]),t.value=!1)};return n(),{photos:s,isLoading:t}}},st={key:0,class:"container col-span-2"},ot={key:1,class:"container col-span-2"},nt={key:2,class:"container col-span-2"},at=p("p",{class:"text-center text-2xl"},"Follow people to see photos!",-1);tt.render=function(e,t,s,o,n,a){const i=l("instagram-loader"),d=l("the-post");return r(),u(b,null,[o.isLoading?(r(),u("div",st,[(r(!0),u(b,null,x([...new Array(4)],((e,t)=>(r(),u(i,{key:t})))),128))])):g("",!0),!o.isLoading&&o.photos&&o.photos.length>0?(r(),u("div",ot,[(r(!0),u(b,null,x(o.photos,(e=>(r(),u(d,{key:e.id,content:e},null,8,["content"])))),128))])):g("",!0),!e.isloading&&o.photos&&0==o.photos.length?(r(),u("div",nt,[at])):g("",!0)],64)};const lt={components:{ContentLoader:S},props:["username","fullname"],computed:{avatarImg(){return`/assets/images/avatars/${this.username}.jpg`}}},rt={class:"flex items-center justify-between col-span-1"},ut={class:"col-span-3"},it={class:"font-bold text-sm"},dt={class:"text-sm"};lt.render=function(e,t,s,o,n,a){const i=l("content-loader"),d=l("router-link");return r(),u(b,null,[s.username&&s.fullname?g("",!0):(r(),u(i,{key:0,height:"61"})),p(d,{to:"/p/"+s.username,class:"grid grid-cols-4 gap-4 mb-4 items-center"},{default:w((()=>[p("div",rt,[p("img",{class:"rounded-full w-16 flex mr-3",src:a.avatarImg,alt:"My profile"},null,8,["src"])]),p("div",ut,[p("p",it,I(s.username),1),p("p",dt,I(s.fullname),1)])])),_:1},8,["to"])],64)};const ct={props:["userDocId","username","profileId","userId"],data:()=>({followed:!1}),computed:{avatarSrc(){return`/assets/images/avatars/${this.username}.jpg`},getFollowed(){return this.followed}},methods:{async handleFollowUser(){this.followed=!0;const{docId:e}=await je(this.userId);await Se(e,this.profileId,null,!0),await Se(this.userDocId,this.userId,null,!1),this.getFollowed}}},mt={key:0,class:"flex flex-row items-center align-items justify-between"},pt={class:"flex items-center justify-between"},It={class:"font-bold text-sm"},gt={class:"flex"};ct.render=function(e,t,s,o,n,a){const i=l("router-link");return a.getFollowed?g("",!0):(r(),u("div",mt,[p("div",pt,[p("img",{class:"rounded-full w-8 flex mr-3",src:a.avatarSrc,alt:"Follow "+s.username},null,8,["src","alt"]),p(i,{to:`/p/${s.username}`},{default:w((()=>[p("p",It,I(s.username),1)])),_:1},8,["to"])]),p("div",gt,[p("button",{class:"text-sm font-bold text-blue",type:"button",onClick:t[1]||(t[1]=(...e)=>a.handleFollowUser&&a.handleFollowUser(...e))}," Follow ")])]))};const ht={components:{SuggestedProfiles:ct,ContentLoader:S},props:["userId"],setup({userId:e}){const t=c(""),s=async()=>{t.value=await async function(e){const t=await z.limit(10).get(),s=G.getters["users/following"];return t.docs.map((e=>a(a({},e.data()),{docId:e.id}))).filter((t=>t.userId!==e&&!s.includes(t.userId)))}(e)},o=m((()=>!!t.value)),n=m((()=>""!=t.value&&t.value.length>0));return H((()=>{e&&s()})),{haveProfiles:o,result:t,userId:e,haveProfileLength:n}}},ft={key:1,class:"flex flex-col"},yt=p("div",{class:"flex items-center align-items justify-between mb-2 mt-2"},[p("p",{clas:"font-bold text-gray text-sm"},"Suggestions for you")],-1),wt={key:2,class:"grid gap-5 mt-4"};ht.render=function(e,t,s,o,n,a){const i=l("content-loader"),d=l("suggested-profiles");return r(),u(b,null,[o.haveProfiles?(r(),u("div",ft,[yt])):(r(),u(i,{key:0,height:"150",class:"mt-5"})),o.haveProfileLength?(r(),u("div",wt,[(r(!0),u(b,null,x(o.result,(e=>(r(),u(d,{key:e.docId,userDocId:e.docId,username:e.username,profileId:e.userId,userId:o.userId},null,8,["userDocId","username","profileId","userId"])))),128))])):g("",!0)],64)};const kt={components:{User:lt,Suggestions:ht},computed:{getUserId(){return this.$store.getters.userId},getUsername(){return this.$store.getters["users/username"]},getFullname(){return this.$store.getters["users/fullname"]}}},Ct={key:0,class:"p-4"};kt.render=function(e,t,s,o,n,a){const i=l("user"),d=l("suggestions");return a.getUserId?(r(),u("div",Ct,[p(i,{username:a.getUsername,fullname:a.getFullname},null,8,["username","fullname"]),p(d,{userId:a.getUserId},null,8,["userId"])])):g("",!0)};const vt={components:{TheHeader:pe,TheTimeline:tt,Sidebar:kt}},bt={class:"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg"};vt.render=function(e,t,s,o,n,a){const i=l("the-header"),d=l("the-timeline"),c=l("Sidebar");return r(),u(b,null,[p(i),p("div",bt,[p(d),p(c)])],64)};const At={components:{ContentLoader:S},emits:["changeFollowCount"],props:["photoCount","profile","followersCount"],setup(e,{emit:t}){const s=k(),{photoCount:o,profile:n,followersCount:l}=L(e),r=c(!1),{docId:u,fullname:i,username:d,following:m=[]}=n.value,p=s.getters["users/username"],I=s.getters.userId,g=p&&p!==d;H((async()=>{if(p&&u){const e=await async function(e,t){const s=await z.where("username","==",e).where("following","array-contains",t).get();console.dir(s.docs);const[o={}]=s.docs.map((e=>a(a({},e.data()),{docId:e.id})));return!!o.fullname}(p,u);r.value=e}}));return{handleToggleFollow:async()=>{r.value=!r.value,t("changeFollowCount",r.value),await async function(e,t,s){await Se(t,s,!e,!0),await Se(s,t,!e,!1)}(r.value,I,u)},activeBtnFollow:g,isFollowingProfile:r,following:m,followers:l,profileFullname:i,profileUsername:d,photoCount:o}}},xt={class:"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg"},Et={class:"container flex justify-center"},jt={class:"flex items-center justify-center flex-col col-span-2"},St={class:"container flex items-center"},Ht={class:"text-2xl mr-4"},Lt={class:"container flex mt-4"},Ut={key:1},Pt={class:"mr-10"},Ft={class:"font-bold"},Mt=v(" photos "),Jt={class:"mr-10"},Nt={class:"font-bold"},Tt={class:"mr-10"},Vt={class:"font-bold"},Dt=v(" following "),Qt={class:"container mt-4"},zt={key:0,class:"font-medium"},qt={key:1,class:"font-medium"};At.render=function(e,t,s,o,n,a){const i=l("content-loader");return r(),u("div",xt,[p("div",Et,[p("img",{class:"rounded-full h-40 w-40 flex",alt:o.profileUsername+" profile picture",src:`/assets/images/avatars/${o.profileUsername}.jpg`},null,8,["alt","src"])]),p("div",jt,[p("div",St,[p("p",Ht,I(o.profileUsername),1),o.activeBtnFollow?(r(),u("button",{key:0,class:"bg-blue-500 font-bold text-sm rounded text-white w-20 h-8",type:"button",onClick:t[1]||(t[1]=(...e)=>o.handleToggleFollow&&o.handleToggleFollow(...e))},I(o.isFollowingProfile?"Unfollow":"Follow"),1)):g("",!0)]),p("div",Lt,[void 0===o.followers||void 0===o.following?(r(),u(i,{key:0,width:"677",height:"24"})):(r(),u("div",Ut,[p("p",Pt,[p("span",Ft,I(o.photoCount),1),Mt]),p("p",Jt,[p("span",Nt,I(o.followers),1),v(" "+I(1===o.followers?" follower":" followers"),1)]),p("p",Tt,[p("span",Vt,I(o.following.length),1),Dt])]))]),p("div",Qt,[o.profileFullname?(r(),u("p",qt,I(o.profileFullname),1)):(r(),u("p",zt,[p(i,{height:"24"})]))])])])};const Gt={props:["photos"],data:()=>({loading:!0}),created(){},components:{ContentLoader:S},watch:{photos(e,t){this.loading=!1}},computed:{havePhotos(){return this.getPhotos&&this.getPhotos.length>0},noPhotos(){return!this.getPhotos||this.getPhotos&&0===this.getPhotos.length},getPhotos(){return this.photos}}},Rt={class:"h-16 border-t border-gray mt-12 pt-4"},Bt={key:0,class:"grid grid-cols-3 gap-8 mt-4 mb-12"},Kt={key:1,class:"grid grid-cols-3 gap-8 mt-4 mb-12"},Wt={key:2,className:"text-center text-2xl"};Gt.render=function(e,t,s,o,n,a){const i=l("content-loader");return r(),u("div",Rt,[n.loading?(r(),u("div",Bt,[(r(!0),u(b,null,x([...new Array(9)],((e,t)=>(r(),u(i,{key:t,width:"320",height:"400"})))),128))])):g("",!0),a.havePhotos?(r(),u("div",Kt,[(r(!0),u(b,null,x(s.photos,(e=>(r(),u("div",{key:e.docId,class:"relative group"},[p("img",{src:e.imageSrc,alt:e.caption},null,8,["src","alt"])])))),128))])):g("",!0),a.noPhotos?(r(),u("p",Wt,"No Photos Yet")):g("",!0)])};const Yt={components:{TheHeader:At,ThePhotos:Gt},setup(){const e=c(null),t=c(0),s=U("user");console.dir(s),H((async()=>{if(!s.value.userId)return;const o=await async function(e){const t=await q.where("userId","==",e).get();let s=[];return t.docs.length>0&&(s=t.docs.map((e=>a(a({},e.data()),{docId:e.id})))),s}(s.value.userId);o&&(e.value=o,t.value=s.value.followers.length),console.dir(e.value)}));const o=m((()=>{let t=0;return e.value&&(t=e.value.length),t}));return{profile:s,photoCollection:e,followersCount:t,photoCount:o,handleChangeFollowCount:e=>{e?t.value+=1:t.value-=1}}}};Yt.render=function(e,t,s,o,n,a){const i=l("the-header"),d=l("the-photos");return r(),u("div",null,[p(i,{profile:o.profile,photoCount:o.photoCount,followersCount:o.followersCount,onChangeFollowCount:o.handleChangeFollowCount},null,8,["profile","photoCount","followersCount","onChangeFollowCount"]),p(d,{photos:o.photoCollection},null,8,["photos"])])};const Ot={components:{TheHeader:pe,Index:Yt},setup(){const e=P(),t=C(),{username:s}=e.params,o=c(void 0),n=c(null);return H((async()=>{n.value=await async function(e){const t=await z.where("username","==",e).get();console.dir(t);let s=null;return t.docs.length>0&&(s=a(a({},t.docs[0].data()),{docId:t.docs[0].id})),s}(s),n.value?o.value=!0:(o.value=!1,t.replace("/notfound"))})),F("user",n),{doesExist:o}}},Xt={key:0,class:"bg-gray"},Zt={class:"mx-auto max-w-screen-lg"};Ot.render=function(e,t,s,o,n,a){const i=l("the-header"),d=l("index");return o.doesExist?(r(),u("div",Xt,[p(i),p("div",Zt,[p(d)])])):g("",!0)};const _t={};_t.render=function(e,t){return r(),u("h2",null,"Not found")};const $t=M({history:J(),routes:[{path:"/",component:vt,meta:{requiresAuth:!0}},{path:"/login",component:B,meta:{requiresUnAuth:!0}},{path:"/signup",component:se,meta:{requiresUnAuth:!0}},{path:"/p/:username",component:Ot},{path:"/:notfound(.*)",component:_t}]});$t.beforeEach(((e,t,s)=>{e.meta.requiresUnAuth&&G.getters.isAuthenticated?s("/"):e.meta.requiresAuth&&!G.getters.isAuthenticated?s("login"):s()}));let es;D.onAuthStateChanged((e=>{es||(es=N(T),es.use(G),es.use($t),es.mount("#app")),e&&(G.dispatch("storeLogin",{userId:e.uid}),G.dispatch("users/loadUser",e))}));
